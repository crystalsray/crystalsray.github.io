
<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Map Tool</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/custom.css" rel="stylesheet">

    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
        height: 400px;
        background-color: #ccc;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }


    </style>

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Map Tool</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Link</a></li>
            
          </ul>

        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>

    <!-- Page Content -->
    <div class="container">

      <div class="row">
        <div class="col-lg-12 text-center">
          <h1 class="mt-5">Map Tool</h1>
        </div>
      </div>

      <div class="row">



        <div class="col-md-3">

        <p><strong style="font-size: 16px;">Where did you go? </strong><br>The dropdown menus and search tools are meant to help you get as close to the place as possible. Once you have located the place, please place a PIN on the map to mark the place</p>

          <!-- Select State -->
          <div class="form-group">
          <label for="states">Select State</label>
            <select id="states" class="form-control" onchange="selectedState()">
              <option disabled selected>Select State</option>
              <option>Don't Know</option>
              <option>Connecticut</option>
              <option>Maine</option>
              <option>Massachusetts</option>
              <option>New Hampshire</option>
              <option>Rhode Island</option>
            </select>
          </div> <!--/ .form-group -->


          <!-- Select Conneticut Town -->
          <div class="form-group" id="groupConnecticutTowns">
          <label for="conneticutTowns">Select Town</label>
            <select id="conneticutTowns" class="form-control" onchange="selectedTown('conneticutTowns')">
              <option disabled selected>Select a town/city</option>
              <option>Don't Know</option>
              <option>Branford</option>
              <option>Bridgeport</option>
              <option>Chester</option>
              <option>Clinton</option>
              <option>Darien</option>
              <option>Deep River</option>
              <option>East Haven</option>
              <option>East Lyme</option>
              <option>Essex</option>
              <option>Fairfield</option>
              <option>Greenwich</option>
              <option>Groton</option>
              <option>Guilford</option>
              <option>Hamden</option>
              <option>Ledyard</option>
              <option>Lyme</option>
              <option>Madison</option>
              <option>Milford</option>
              <option>Montville</option>
              <option>New Haven</option>
              <option>New London</option>
              <option>North Haven</option>
              <option>Norwalk</option>
              <option>Norwich</option>
              <option>Old Lyme</option>
              <option>Old Saybrook</option>
              <option>Orange</option>
              <option>Preston</option>
              <option>Shelton</option>
              <option>Stamford</option>
              <option>Stonington</option>
              <option>Stratford</option>
              <option>Waterford</option>
              <option>West Haven</option>
              <option>Westbrook</option>
              <option>Westport</option>
            </select>
          </div> <!--/ .form-group --> 

          <div class="form-group" id="groupMaineTowns">
            <label for="maineTowns">Select Town</label>
            <select class="form-control" id="maineTowns" onchange="selectedTown('maineTowns')">
              <option disabled selected>Select a town/city</option><option>Don't Know</option><option>Addison</option><option>Alna</option><option>Arrowsic</option><option>Arundel</option><option>Bar Harbor</option><option>Bath Cty</option><option>Beals</option><option>Belfast Cty</option><option>Biddeford Cty</option><option>Bluehill</option><option>Boothbay</option><option>Boothbay Harbor</option><option>Breman</option><option>Bristol</option><option>Brooklin</option><option>Brooksville</option><option>Brunswick</option><option>Bucksport</option><option>Calais Cty</option><option>Camden</option><option>Cape Elizabeth</option><option>Castine</option><option>Centerville</option><option>Cherryfield</option><option>Columbia</option><option>Columbia Falls</option><option>Cranberry Isles</option><option>Cumberland</option><option>Cushing</option><option>Cutler</option><option>Damariscotta</option><option>Deer Isle</option><option>East Machias</option><option>Eastport Cty</option><option>Edgecomb</option><option>Edmunds</option><option>Eliot</option><option>Ellsworth Cty</option><option>Falmouth</option><option>Frankfort</option><option>Franklin</option><option>Freeport</option><option>Frenchboro</option><option>Friendship</option><option>Georgetown</option><option>Gouldsboro</option><option>Hancock</option><option>Harpswell</option><option>Harrington</option><option>Isle Au Haut</option><option>Isle Boro</option><option>Jonesboro</option><option>Jonesport</option><option>Kennebunk</option><option>Kennebunkport</option><option>Kittery</option><option>Lamoine</option><option>Lincolnville</option><option>Lubec</option><option>Machias</option><option>Machiasport</option><option>Marshfield</option><option>Milbridge</option><option>Mount Desert</option><option>Newcastle</option><option>North Haven</option><option>North Port</option><option>North Yarmouth</option><option>Ogunquit</option><option>Old Orchard Beach</option><option>Orland</option><option>Owlshead</option><option>Pembroke</option><option>Penobscot</option><option>Perry</option><option>Phippsburg</option><option>Portland Cty</option><option>Pownall</option><option>Prospect</option><option>Robinston</option><option>Rockland Cty</option><option>Rockport</option><option>Roque Bluffs</option><option>Saco Cty</option><option>Scarborough</option><option>Searsport</option><option>Sedgewick</option><option>Sorrento</option><option>South Berick</option><option>South Bristol</option><option>South Portland Cty</option><option>South Thomaston</option><option>South West Harbor</option><option>Southport</option><option>St George</option><option>Steuben</option><option>Stockton Springs</option><option>Stonington</option><option>Sullivan</option><option>Surry</option><option>Swans Island</option><option>Swanville</option><option>Thomaston</option><option>Topsham</option><option>Tremont</option><option>Trenton</option><option>Trescott Twp</option><option>Verona</option><option>Waldoboro</option><option>Warren</option><option>Wells</option><option>West Bath</option><option>Westbrook Cty</option><option>Westport</option><option>Whiting</option><option>Whitneyville</option><option>Winter Harbor</option><option>Wisscasset</option><option>Woolwich</option><option>Yarmouth</option><option>York</option>
            </select>
          </div>

          <div class="form-group" id="groupMassachusettsTowns">
            <label for="">Select Town</label>
            <select class="form-control" id="massachusettsTowns" onchange="selectedTown('massachusettsTowns')">
              <option disabled selected>Select a town/city</option><option>Don't Know</option><option>Acushnet</option><option>Aquinnah</option><option>Barnstable</option><option>Berkley</option><option>Beverly</option><option>Boston</option><option>Bourne</option><option>Braintree</option><option>Brewster</option><option>Brookline</option><option>Cambridge</option><option>Chatham</option><option>Chelsea</option><option>Chilmark</option><option>Cohasset</option><option>Danvers</option><option>Dartmouth</option><option>Dennis</option><option>Dighton</option><option>Duxbury</option><option>Eastham</option><option>Edgartown</option><option>Essex</option><option>Everett</option><option>Fairhaven</option><option>Fall River</option><option>Falmouth</option><option>Freetown</option><option>Gloucester</option><option>Gosnold</option><option>Hamilton</option><option>Harwich</option><option>Hingham</option><option>Hull</option><option>Ipswich</option><option>Kingston</option><option>Lynn</option><option>Malden</option><option>Manchester</option><option>Marblehead</option><option>Marion</option><option>Marshfield</option><option>Mashpee</option><option>Mattapoisett</option><option>Medford</option><option>Milton</option><option>Nahant</option><option>Nantucket</option><option>New Bedford</option><option>Newbury</option><option>Newburyport</option><option>Norwell</option><option>Oak Bluffs</option><option>Orleans</option><option>Peabody</option><option>Plymouth</option><option>Provincetown</option><option>Quincy</option><option>Rehoboth</option><option>Revere</option><option>Rochester</option><option>Rockport</option><option>Rowley</option><option>Salem</option><option>Salisbury</option><option>Sandwich</option><option>Saugus</option><option>Scituate</option><option>Seekonk</option><option>Somerset</option><option>Somerville</option><option>Swampscott</option><option>Swansea</option><option>Tisbury</option><option>Truro</option><option>Wareham</option><option>Wellfleet</option><option>Wenham</option><option>West Tisbury</option><option>Westport</option><option>Weymouth</option><option>Winthrop</option><option>Yarmouth</option>
            </select>
          </div>


          <div class="form-group" id="groupNewHampshireTowns">
          <label for="newHampshireTowns">Select Town </label>
            <select class="form-control" id="newHampshireTowns" onchange="selectedTown('newHampshireTowns')">
              <option disabled selected>Select a town/city</option><option>Don't Know</option><option>Atkinson</option><option>Brentwood</option><option>Danville</option><option>Dover</option><option>Durham</option><option>East Kingston</option><option>Epping</option><option>Exeter</option><option>Fremont</option><option>Greenland</option><option>Hampstead</option><option>Hampton</option><option>Hampton Falls</option><option>Kensington</option><option>Kingston</option><option>Lee</option><option>Madbury</option><option>New Castle</option><option>Newfields</option><option>Newington</option><option>Newmarket</option><option>Newton</option><option>North Hampton</option><option>Plaistow</option><option>Portsmouth</option><option>Rollinsford</option><option>Rye</option><option>Seabrook</option><option>Somersworth</option><option>South Hampton</option><option>Stratham</option>
            </select>
          </div>


          <div class="form-group" id="groupRhodeIslandTowns">
          <label for="rhodeIslandTowns">Select Town </label>
            <select class="form-control" id="rhodeIslandTowns" onchange="selectedTown('rhodeIslandTowns')">
              <option disabled selected>Select a town/city</option><option>Don't Know</option><option>Barrington</option><option>Bristol</option><option>Charlestown</option><option>Cranston</option><option>East Greenwich</option><option>East Providence</option><option>Exeter</option><option>Hopkinton</option><option>Jamestown</option><option>Little Compton</option><option>Middletown</option><option>Narragansett</option><option>Newport</option><option>North Kingstown</option><option>North Providence</option><option>Pawtucket</option><option>Portsmouth</option><option>Providence</option><option>South Kingstown</option><option>Tiverton</option><option>Warren</option><option>Warwick</option><option>Westerly</option>
            </select>
          </div>


          <!-- Select Place Text Field -->
          <div id="groupPlaceName">

              <div class="form-group">
                <label for="placeName">Name of Place</label>
                <input type="text" class="form-control" placeholder="Enter place name" id="placeName">
                <small><span class="help-block text-muted">Examples: beach name, street name, marina, or park name.</span></small>
              </div> <!--/ .form-group -->

              <button type="button" class="btn btn-primary btn-block" aria-label="Search" onclick="placeName('placeName')" id="btn_search">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search
              </button>

                <br>
               <div class="form-check" id="checkbox_dontKnowPlaceName_group">
                <input class="form-check-input" type="checkbox" value="" id="checkbox_dontKnowPlaceName" onclick="checkbox_dontKnowPlaceName(this)">
                <label class="form-check-label text-primary" for="checkbox_dontKnowPlaceName" style="font-weight: 400; display: inline;">
                  I can’t find the place on the map/I don’t remember the name.
                </label>
            </div>

          </div>


           <!-- Instructions to place pin -->
          <div id="placeNotFound">
           <br>
              <div class="bg-warning">
                <p class="text-center"><strong>Search Again</strong></p>
                <p>The place has not been found. Please search again or locate the place using the map.</p>
              </div>
          </div>


          <!-- Instructions to place pin -->
          <div id="pinInstructions">
           <br>
              <div class="bg-success">
                <p class="text-center"><strong>Place Pin on the Map</strong></p>
                <p>Please drop a PIN near the closest landmark you know and/or provide as many details as you remember about this place in the text box below. Use the + and - buttons at the bottom-right of the window to zoom in and out.</p>
              </div>

              <br>
              <div>
                <textarea class="form-control" aria-label="With textarea" placeholder="Provide as many details as you remember about this place" id="textarea_placeDetails"></textarea>
              </div>
              <br>
              <p class="text-danger" id="warning_message"></p>
              <button type="button" class="btn btn-success btn-block" aria-label="Continue" onclick="placeDetails()">
                 Continue
              </button>
          </div>




          <!-- Confirmation -->
          <div id="confirm">
          <br>
            <div class="bg-success">
             <p class="text-center"><strong>Confirm Location</strong></p>
             <p>Is this the correct place?</p>
             <p id="confirmPlaceAddress"></p>
             <input class="btn btn-success btn-block" type="submit" value="Confirm Location">
            </div>
          </div>
          

        </div> <!--/ .col-md-3 -->



        <div class="col-md-9">

          <!-- Show map -->
          <div id="map"></div>

          <!-- Reset Button -->
          <br>

            <p>Use the + and – buttons at the bottom-right of the window to zoom in and out. Click and drag to move the map. Click to place a PIN on the map</p>

            <button type="button" class="btn btn-success btn-default" aria-label="Reset Form" onclick="resetForm()">
                   Reset
            </button>

     
        </div> <!-- / .col-md-9 -->

        

      </div> <!--/ .row -->





      <div class="row">
        <div class="col-md-12">
          <hr>
          <p> <strong>Developer's return value </strong></p>
          <p id="devReturnVal"></p>
        </div>
      </div>

    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

<script>

var geocoder;
var infowindow;
var map;
var marker;
var returnVal;

var town;
var state;
var place;

var notFound = document.getElementById("placeNotFound");
var pinInfo = document.getElementById("pinInstructions");
var confirm = document.getElementById("confirm");
var warning_message = document.getElementById("warning_message");

var placeNameSearch = 0; //Count attempts by viewer in "Place" field
var groupPlaceName = document.getElementById("groupPlaceName");

// towns
var ct = document.getElementById("groupConnecticutTowns");
var mn = document.getElementById("groupMaineTowns");
var ma = document.getElementById("groupMassachusettsTowns");
var ri = document.getElementById("groupRhodeIslandTowns");
var nh = document.getElementById("groupNewHampshireTowns");


function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    zoom: 6,
    streetViewControl: false,
    scaleControl: true,
    center: {lat: 44.247658, lng: -71.553955}
  });

  var options = {
    componentRestrictions: {country: "us"}
  }

  geocoder = new google.maps.Geocoder();
  infowindow = new google.maps.InfoWindow; //for dropped pin

  var autoInput = document.getElementById("placeName");
  //var autocomplete = new google.maps.places.Autocomplete(autoInput, options);
  //autocomplete.setComponentRestrictions({
  //    'country': ['us']
  //});

  // Bind the map's bounds (viewport) property to the autocomplete object,
  // so that the autocomplete requests use the current map bounds for the
  // bounds option in the request.
 // autocomplete.bindTo('bounds', map);
  //autocomplete.setOptions({strictBounds: true});

  google.maps.event.addListener(map, 'click', function (evt) {
    placeMarker(evt.latLng);
  });

  //update bounds when viewport is changed
  //google.maps.event.addListener(map, 'idle', function() {
  //   autocomplete.bindTo('bounds', map);
  //});

}



function placeMarker(location) {

console.log("placeMarker()");

//marker.setMap(null);

//infowindow = null;

  if (marker) {
      //if marker already was created change positon
      console.log("   change marker positon");
      marker.setPosition(location);
  } else {
      //create a marker
      console.log("   new marker");
      marker = new google.maps.Marker({          
          position: location,
          map: map,
          draggable: true
      });  
  }

  // change lat/lng coordinates to readable text
  var input = marker.getPosition();
  var latlng = {lat: input.lat(), lng: input.lng()};
  console.log("     latlng: " + input.lat() + "    lng: " + input.lng() );
  geocoder.geocode({'location': latlng}, function(results, status) {
    if (status === 'OK') { 
      console.log("     results[0].formatted_address: " + results[0].formatted_address);
      infowindow.setContent(results[0].formatted_address);

      infowindow.open(map, marker); 
      updateDevValue(results[0].formatted_address);

      //detect if checbox is checked.
      // if checkbox is clicked, show additional input field
      var checkbox_dontKnowPlaceName = document.getElementById("checkbox_dontKnowPlaceName");
      if (checkbox_dontKnowPlaceName.checked) {

    } else {
        //if checkbox is not checked
        //check if Pin is added in correct place
        hideHelpFields(); //hide other helpfields
        document.getElementById("confirmPlaceAddress").innerHTML = results[0].formatted_address;
        confirm.style.display = "block";
      }

    } 
    else { 
       window.alert('No results found'); 
     }
  }); // end geocoder  
}


//functions for erasing marker
function setMapOnAll(map) {
    marker.setMap(map);
}

function clearMarker(){
   setMapOnAll(null);
}

function deleteMarker(){ 
  clearMarker()
  marker="";

  infowindow.close();
}


//hide help fields
function hideHelpFields() {
  notFound.style.display = "none";
  pinInfo.style.display = "none";
  confirm.style.display = "none";
}


//update return value for the developer
function updateDevValue(val) {
  returnVal = val;
  document.getElementById("devReturnVal").innerHTML = returnVal;
}


function geocodeLocation(geocoder, resultsMap, location, zoom) {
  console.log('geocodeLocation(): ' + location);
  geocoder.geocode({
    'address': location
  }, 


    function(results, status) {

    //successful geocode attemp
    if (status === 'OK') {
      resultsMap.setCenter(results[0].geometry.location);
      //map.setZoom(zoom);
      map.fitBounds(results[0].geometry.viewport); //zoom into select state/town
      console.log("geocode() -> status: ok");
      if (place) {
          console.log("geocodeLocation() -> place: "+place);
          console.log("geocodeLocation() -> location: "+location);

          //place marker
          //marker = new google.maps.Marker({
          //  map: resultsMap,
          //  position: results[0].geometry.location
          //});


          if (marker) {
            //if marker already was created change positon
             console.log("   change marker positon");
             marker.setPosition(results[0].geometry.location);
          } else {
              //create a marker
              console.log("   new marker");
              marker = new google.maps.Marker({          
                  map: resultsMap,
                  position: results[0].geometry.location
              });  
          }


          //show info window above dropped pin with formatted address
          infowindow.setContent(results[0].formatted_address);
          infowindow.open(map, marker);
          //update the return value for the developer
          updateDevValue(results[0].formatted_address);
          hideHelpFields(); //hide other helpfields
          document.getElementById("confirmPlaceAddress").innerHTML = results[0].formatted_address;
          confirm.style.display = "block";

      }
    } 

    //unsuccesful geocode attempt
    else {
      // Show instructions to drop pin after two attempts.
      console.log("geocodeLocation() -> placeNameSearch: " + placeNameSearch);
      hideHelpFields(); //hide other helpfields
        if ( placeNameSearch > 1 ) {
          pinInfo.style.display = "block"; // show instructional text to drop a pin
        }
        else {
          notFound.style.display = "block"; // show info to search input field again
          placeNameSearch++;
        }
    }
  });
}



function selectedState() {
  state = document.getElementById("states").value;
  var zoom = 8; //find way to fit state
  placeNameSearch = 0;

  console.log("selectedState(): " + state);

  hideHelpFields(); //hide Help fields

  if (state === "Don't Know") {
    //show instructions for dropping a pin 
    hideTowns();
    groupPlaceName.style.display = "none";  // In the event that town and place name fields have been filled out, reset/clear fields
    pinInfo.style.display = "block";
    updateDevValue("");
    

    //initialize fields
    document.getElementById("checkbox_dontKnowPlaceName").checked = true;
    document.getElementById("warning_message").innerHTML="";
    document.getElementById("textarea_placeDetails").value="";
  }

  else {
    //RESET state, field and place name
    //Hide place name field, help text and search button in case the user has filled these out, but change the state
    groupPlaceName.style.display = "none";
    document.getElementById("placeName").value = "";
    place=null;


    document.getElementById("checkbox_dontKnowPlaceName").checked = false;

    //update the return value for the developer
    updateDevValue(state);

    //geocode state
    geocodeLocation(geocoder, map, state, zoom);
    showTowns(state);
  }


  // if marker exists, delete marker
  if (marker) {
    deleteMarker(); 
  }
  
  
}


function hideTowns() {
  ct.style.display = "none";
  mn.style.display = "none";
  ma.style.display = "none";
  ri.style.display = "none";
  nh.style.display = "none";
}


function showTowns(state) {

  //initialization
  hideTowns();
  

  //initialize selections, in the event that the user has already selected a town, but then chooses a different state.
  document.getElementById("conneticutTowns").value='Select a town/city';
  document.getElementById("rhodeIslandTowns").value='Select a town/city';
  document.getElementById("massachusettsTowns").value='Select a town/city';
  document.getElementById("newHampshireTowns").value='Select a town/city';
  document.getElementById("maineTowns").value='Select a town/city';

  //show towns for selected state
  if (state==="Connecticut") {
    ct.style.display = "block"; 
  }
  else if (state==="Maine") {
    mn.style.display = "block";
  }

  else if (state==="Massachusetts")  {
    ma.style.display = "block";
  }

  else if (state==="Rhode Island")  {
    ri.style.display = "block";
  }

  else  { //New Hampshire
      nh.style.display = "block";
  } 

}


//Functione executes when a town has been selected
function selectedTown(townID) {
  //center map on town

  town = document.getElementById(townID).value;
  var location;
  console.log("selectedTown()" + town);

  hideHelpFields();
  // if marker exists, delete marker
  if(marker) {
    deleteMarker();
  }
  

  // Empty "Name of Place" text input field in the event the user filled it
  // out for a previously selected town
  document.getElementById("placeName").value = "";
  placeNameSearch = 0;

  if (town==="Don't Know") {
    location= state; // if "Don't Know" is chosen for state, don't include town name in "location" for geocoding
  }
  else {
    location= town + ", " + state;
  }
   
  var zoom = 14;

  //geocode results, zoom in on map
  geocodeLocation(geocoder, map, location, zoom);

  //show Textinput field for typing place name
  var placeName = document.getElementById("groupPlaceName");
  placeName.style.display = "block";

  //start timer to show checkmark and text for placing pin after 1 minute
  //setTimeout(showCheckmarkTxt, 60000)
  showCheckmarkTxt();

  //update the return value for the developer
  updateDevValue(location);
}


function showCheckmarkTxt() {
  document.getElementById("checkbox_dontKnowPlaceName_group").style.display = "block";
}


function placeName(placeID) {
  place = document.getElementById("placeName").value;
  var location;
  var zoom = 20;


  if (place=="") {

    // increment attempt count
    placeNameSearch++;

    location=town + ", " + state;
     geocodeLocation(geocoder, map, location, zoom);
  }

  else if (town==="Don't Know") {
    location= place + ", " + state; // exclude town if "Don't Know" is chosen
    geocodeLocation(geocoder, map, location, zoom);
  }

  else {
    location = place + " " + town + " " + state; //use Autocomplete result
    geocodeLocation(geocoder, map, location, zoom);  
  }

  //update the return value for the developer
  updateDevValue(location);
              
}


function checkbox_dontKnowPlaceName(checkboxElem){
  if(checkboxElem.checked) {
     hideHelpFields();
     pinInfo.style.display = "block"; // show instructional text to drop a pin
     // disable previous fields
      document.getElementById("states").disabled = true;
      document.getElementById("conneticutTowns").disabled = true;
      document.getElementById("rhodeIslandTowns").disabled = true;
      document.getElementById("massachusettsTowns").disabled = true;
      document.getElementById("newHampshireTowns").disabled = true;
      document.getElementById("maineTowns").disabled = true;
      document.getElementById("placeName").disabled = true;
      document.getElementById("btn_search").disabled = true;

  } else{
     hideHelpFields();
     //enable  preios fields
     document.getElementById("states").disabled = false;
      document.getElementById("conneticutTowns").disabled = false;
      document.getElementById("rhodeIslandTowns").disabled = false;
      document.getElementById("massachusettsTowns").disabled = false;
      document.getElementById("newHampshireTowns").disabled = false;
      document.getElementById("maineTowns").disabled = false;
      document.getElementById("placeName").disabled = false;
      document.getElementById("btn_search").disabled = false;
  }
}


// Textarea field for details of place
// updateDevValue() with address and text field
function placeDetails(){
  // grab value from pin
  // check if pin has been placed and text field has text
  // if pin has been placed, update devValue with address and text field
  var textarea_txt = document.getElementById("textarea_placeDetails").value;
  if (marker || textarea_txt!="") { //don't need to enter both text and pin
    updateDevValue(returnVal + "<br> <strong>Description: </strong>" + textarea_txt);
    document.getElementById("warning_message").innerHTML="";
  }

  //if pin has NOT been placed and/or text field is empty
  // place message to place pin and/or enter text in field
  else {
    document.getElementById("warning_message").innerHTML="Place pin on map and/or enter text in field above.";
  }
}


//Reset Form

function resetForm() {

  // Reset state
  document.getElementById("states").value="Select State";

  //Reset towns
  document.getElementById("conneticutTowns").value='Select a town/city';
  document.getElementById("rhodeIslandTowns").value='Select a town/city';
  document.getElementById("massachusettsTowns").value='Select a town/city';
  document.getElementById("newHampshireTowns").value='Select a town/city';
  document.getElementById("maineTowns").value='Select a town/city';

  //hide place group field
  groupPlaceName.style.display = "none";


  //empty text fields,text areas
  document.getElementById("checkbox_dontKnowPlaceName").checked = false;
  document.getElementById("warning_message").innerHTML="";
  document.getElementById("textarea_placeDetails").value="";

  //hide town and help fields
  hideTowns();
  hideHelpFields();

  ////enable   fields
     document.getElementById("states").disabled = false;
      document.getElementById("conneticutTowns").disabled = false;
      document.getElementById("rhodeIslandTowns").disabled = false;
      document.getElementById("massachusettsTowns").disabled = false;
      document.getElementById("newHampshireTowns").disabled = false;
      document.getElementById("maineTowns").disabled = false;
      document.getElementById("placeName").disabled = false;
      document.getElementById("btn_search").disabled = false;

  //erase marker and info box

  if(marker) {
    deleteMarker();
  }

  //reset map

  map.setCenter({lat: 44.247658, lng: -71.553955});
  map.setZoom(6);
}





</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBOlaySnzB2tBKFR3us5byUMV96cbcZYoY&callback=initMap&libraries=places""></script>

  </body>

</html>
