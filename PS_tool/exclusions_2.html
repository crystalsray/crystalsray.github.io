<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Use substantive assumptions to constraints the number of strata for this study</title>
    <link rel="stylesheet" href="css/foundation.min.css">
    <link rel="stylesheet" href="css/app.css">
    <script src="js/mathjs-master/dist/math.js"></script>
    <!-- [DO NOT DEPLOY] --> <script src="js/editablegrid-master/editablegrid_renderers.js" ></script>
    <!-- [DO NOT DEPLOY] --> <script src="js/editablegrid-master/editablegrid_editors.js" ></script>
    <!-- [DO NOT DEPLOY] --> <script src="js/editablegrid-master/editablegrid_validators.js" ></script>
    <!-- [DO NOT DEPLOY] --> <script src="js/editablegrid-master/editablegrid_utils.js" ></script>
    <!-- [DO NOT DEPLOY] --> <script src="js/editablegrid-master/editablegrid_charts.js" ></script>
    <link rel="stylesheet" href="js/editablegrid-master/editablegrid.css" type="text/css" media="screen">

    <script>
      window.onload = function() {
        var groupNames= new Array();
        var strataNames = new Array();
        var group1 = localStorage.group1Local;
        var group2 = localStorage.group2Local;
        var strata = localStorage.strata;
        var strata1 = localStorage.strata1;
        var strata2 = localStorage.strata2;
        var strata3 = localStorage.strata3;
        var strata4 = localStorage.strata4;
        groupNames.push(group1);
        groupNames.push(group2);
        strataNames.push(strata1);
        strataNames.push(strata2);
        strataNames.push(strata3);
        strataNames.push(strata4);
        monoGrid = new EditableGrid("DemoGridAttach", { sortIconUp: "up.png", sortIconDown: "down.png"}); 
        // we build and load the metadata in Javascript
        monoGrid.load({ metadata: [
          { name: "strata02", datatype: "string", editable: false },
          { name: "strata11", datatype: "boolean", editable: true },
          { name: "strata21", datatype: "boolean", editable: true },
        ]});
        monoGrid.attachToHTMLTable('monoGrid');
        monoGrid.renderGrid();        
        // we build and load the metadata in Javascript
        irrGrid = new EditableGrid("DemoGridAttach", { sortIconUp: "up.png", sortIconDown: "down.png"});
        irrGrid.load({ metadata: [
          { name: "strata02", datatype: "string", editable: false },
          { name: "strata12", datatype: "boolean", editable: true },
          { name: "strata22", datatype: "boolean", editable: true },
        ]});
        irrGrid.attachToHTMLTable('irrGrid');
        irrGrid.renderGrid();
        document.getElementById('group1Name').innerHTML = group1;
        document.getElementById('group2Name').innerHTML = group2;
        document.getElementById('group1Name2').innerHTML = group1;
        document.getElementById('group2Name2').innerHTML = group2;
        document.getElementById('strata1Name').innerHTML = strata1;
        document.getElementById('strata2Name').innerHTML = strata2;
        document.getElementById('strata1Name2').innerHTML = strata1;
        document.getElementById('strata2Name2').innerHTML = strata2;;
        document.getElementById('strata1Name3').innerHTML = strata1;
        document.getElementById('strata2Name3').innerHTML = strata2;
        document.getElementById('strata1Name4').innerHTML = strata1;
        document.getElementById('strata2Name4').innerHTML = strata2;
      } 
    </script>

  </head>
  <body>
    
    <div class="callout large primary">
      <div class="row column text-center">
        <h1>Principal Stratification Tool</h1>
      </div>
    </div>
    
    <div class="row" id="content">

      <div class="medium-3 medium-offset-1 columns" data-sticky-container>
        <div class="sticky" data-sticky data-anchor="content">
          <ol class="menu vertical">
            <li><a href="PS_tool.html">&larr; Back to Input</a></li>
            <li><a href="index.html"><strong>Start &rarr;</strong> Calculating Bounds for Principal Causal Effects: Interactive Analysis Tool</a></li>
            <li><!-- PS_tool.html --> Identify the principal strata for your study</a></li>
            <li><!-- exclusions_3.html -->Use Substantive Assumptions to Restrict the Number of Strata of Interest for these Analyses</li>
            <li><!-- bounds.html --> Determining proportions of subgroups using observed quantities</li>
            <li><!-- pUnknown.html -->Solving for proportions that are not directly observed</li>
            <li><!-- meansIntro.html -->Solving for Means under Treatment and Control</li>
            <li><!-- Bounds_calc.html -->Calculating the Bounds and Estimating Ranges of Impact</li>
          </ol>
        </div>
      </div>

      <div class="medium-7 columns">
        <div class="row column">
          <h2>Use Substantive Assumptions to Constraints the Number of Strata for this Study</h2>
          
          <p>In most cases, it is possible to eliminate some of these strata based on two substantively driven assumptions. This page will walk you through those assumptions and help to refine your matrix to reflect the context of your study and research questions</p>

          <h3>The Monotonicity Assumption</h3>
          <p>Monotonicity assumption that individual would be at least as likely to take up the treatment under assignment to the treatment condition as under assignment to the control condition.  For example, if the treatment were assignment to receiving a new medication, it might be appropriate to assume that there are no patients who would take up the medication under assignment to the control group but not take up the medication under assignment to treatment.  In the matrix below, click any strata in which you think you can apply the Monotonicity assumption.</p>

          <table id="monoGrid" class="testgrid" align="center">
            <tr>
              <th colspan=4 class="control-treatment-header" id=group1Name></th>
            </tr>
            <tr>
              <th rowspan=4 class="control-treatment-header" id=group2Name></th>
            </tr>
            <tr>
              <th> </th>
              <th id=strata1Name></th>
              <th id=strata2Name></th>
            </tr>
            <tr id="R1">
              <th id=strata1Name3></th>
              <td> </td>
              <td> </td>
            </tr>
            <tr id="R2">
              <th id=strata2Name3></th>
              <td> </td>
              <td> </td>
            </tr>
            </tr>
          </table>

          <h3>The Exclusion Restriction</h3>
          <p>The exclusion restriction can be applied in cases where random assignment would likely not include a change subgroup membership. Some strata may be theoretically possible but not plausible in the context of your study. For example, in the Feller et al  Head Start study , it was plausible to assume that there were not participants who would enroll in a non-Head Start center care (subgroup 1) program if assigned to Head Start (treatment), would take up Home-based(subgroup 1) care if assigned to the control group. There may be similar circumstances in your study.    In the matrix below, click any strata in which you think you can apply the exclusion restriction.</p>

          <table id="irrGrid" class="testgrid" align="center">
          <tr>
            <th colspan=4 class="control-treatment-header" id=group1Name2></th>
          </tr>
          <tr>
            <th rowspan=4 class="control-treatment-header" id=group2Name2></th>
          </tr>
          <tr>
            <th> </th>
            <th id=strata1Name2></th>
            <th id=strata2Name2></th>
          </tr>
          <tr id="R1">
            <th id=strata1Name4></th>
            <td> </td>
            <td> </td>
          </tr>
          <tr id="R2">
            <th id=strata2Name4></th>
            <td> </td>
            <td> </td>
          </tr>
          </tr>
        </table>


        </div> <!--/ end blog post -->

        <div class="row column">
            <div class="small-12 text-center">
              <button class="button" onclick="moveToBounds()">Continue</button>
            </div>
        </div>

      </div> <!--/ end medium- 7-->

      
      

      <div class="medium-1 columns">&nbsp; <!-- keep column empty, last column spans the remaining width of the page -->
      </div>

    </div><!--/ end row -->
    

    <footer>
      <div class="row expanded callout secondary">
        <div class="medium-10 medium-offset-1 columns">
      <p>Funding for this project was provided through a grant from Spencer Foundation. This website is designed to assist researchers interested in applying a principal stratification approach to their research questions. This tool intended for researchers who have a familiarity with the principal stratification approach. Researchers unfamiliar with the approach are encouraged to consult <a href="https://gspp.berkeley.edu/assets/uploads/research/pdf/Principal_Stratification.pdf" target="_blank">Page <em>et al</em> 2015 </a>  before using this tool. </p>

        </div>
      </div>


    </footer>
    
    <script src="js/vendor/jquery-2.1.4.min.js"></script>
    <script src="js/vendor/foundation.js"></script>
    <script>

        function moveToBounds() {
          localStorage.irr=irrGrid;
          window.location.href = 'file:///C:/Notepad++/test/editablegrid-master/examples/attach/bounds2.html'
        }
        
    </script>
  </body>
</html>



